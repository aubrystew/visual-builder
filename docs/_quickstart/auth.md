---
title: Handle Authentication
order: 6
layout: post-toc
redirect_from: /quick-start/
---

# Build Your Integration

## Handle Authentication

![Zapier Example OAuth authentication](https://cdn.zappy.app/d57f6aee066334937f1b8f7ed7cb956e.gif)

_Many Zapier integrations use OAuth v2 authentication to connect user accounts, including Zapier's built-in GitHub integration_

The first thing to set up is authentication. Your integration defines how Zapier’s platform authenticates with the API and what data needs to be collected from users to allow access to their accounts. Zapier supports most popular authentication schemes, including basic auth with username and password, API key auth, digest, session, and OAuth v2.

Whenever someone uses your integration in a Zap, they'll first select your app, then will connect their account. That's where the authentication flow comes in. Zapier shows a popup window where users login and select their account with OAuth2, or where they can enter account details with basic auth.

## 1. Select Your Authentication Scheme

![Zapier Visual Builder select auth](https://cdn.zappy.app/45b6b7137b699043855bb9bc0a465dbb.png)

_Zapier supports a wide range of authentication schemes—select the best one for your app_

We'll use OAuth v2 in this example GitHub integration, following the steps [here](https://docs.github.com/en/developers/apps/building-oauth-apps/authorizing-oauth-apps). With OAuth2, Zapier sends users to your site to authenticate. Click the _Authentication_ tab in Zapier Visual Builder, then select _OAuth v2_ from the menu. Zapier will create a form to complete the required configuration automatically. 

> _If you want to use another authentication scheme, check our [auth docs](https://platform.zapier.com/docs/auth) for more details and use them instead of the steps below._

## 2. Configure Authentication Fields

![Zapier Visual Builder auth fields](https://cdn.zappy.app/744c733e7f53aa29797f740f64b3759f.png)

_If your OAuth v2 implementation is standard and users don’t need to input any additional fields such as sub domain to access the authorization url, you don’t need to make any changes in this section_

If you do add input fields in this section, this will show a form to users with the fields you’ve added before redirecting them to your authorization URL. More on adding an OAuth v2 input form [here](https://platform.zapier.com/docs/oauth#add-an-oauth-input-form-optional). For our example GitHub integration, we will not make any changes to this section. 

## 2. OAuth Redirect URL

![Zapier Visual Builder OAuth2 redirect](https://cdn.zappy.app/d0d056c3f74e3a9f4389550ebf913aee.png)

Copy the OAuth Redirect URL generated by Zapier, and add it to the allowed list for the new application you’ve added for the OAuth integration with Zapier - typically this application is created in your app’s application, integration, or API settings. In GitHub’s interface, this field is called the authorization callback URL.

![GitHub callback](https://cdn.zappy.app/da0ba8d455d48bf784033ec885945a15.png)

## 3. Enter Application Credentials

![Zapier Visual Builder OAuth2 credentials](https://cdn.zappy.app/6cdeb3b060ee0e3c4955b20652c2c98c.png)

In your new application’s developer settings in GitHub, you’ll receive credentials that Zapier will use to verify itself to your app - called a Client ID and Client Secret.

Copy that data and paste those items in their respective fields. Zapier will use that data along with the authorization URL to receive the request token from GitHub.

![GitHub Client ID](https://cdn.zappy.app/69380b9f4dd69169b2fd15ad0c7ebaee.png)

Click Save & Continue to save your progress so far.

## 4. Add OAuth v2 Endpoint Configuration

### Authorization URL

![Zapier Visual Builder OAuth2 endpoint configuration](https://cdn.zappy.app/4c1a0fe3d1b0037b18c33eb3c8d18eb6.png)

Add the Authorization URL `https://github.com/login/oauth/authorize` from GitHub’s documentation with the specified GET method. 

Selecting _Show Options_ allows you to further specify URL parameters and HTTP headers as needed for the authorization request. By default, Zapier includes `client_id`, `state`, `redirect_uri` and `response_type` as URL parameters, which you can edit as needed based on your API’s documentation. 

For GitHub, we’ll keep the default settings. 

### Scope

![Zapier Visual Builder OAuth2 scope](https://cdn.zappy.app/1d4b9df91ff86b491f4c2caba7ed08f5.png) 

An app’s API documentation will include the available scopes. For this example, we’ll give our app `repo` and `user` scopes. You can see all the available scopes for GitHub [here](https://docs.github.com/en/developers/apps/building-oauth-apps/scopes-for-oauth-apps).

![OAuth Authorize screenshot](https://cdn.zappy.app/9bc2db9a069c757c58d76a54f626bc70.png) 

### Access Token Request

Next add the Access Token Request URL `https://github.com/login/oauth/access_token` as a POST call.

![Zapier Visual Builder OAuth2 access token request](https://cdn.zappy.app/09b11ca6181974cc853a1a165e77bad4.png)

By default, Zapier will pass the `client ID`, `client secret`, `authorization code`, `redirect URI`, and a standard authorization_code `grant type` in the API request body. If you need to change that, click the _Show Options_ button and add any additional call details needed.

### Refresh Token Request

If your API supports automated token refresh, you would add your API’s Refresh Token Request endpoint here, and check the _Automatically Refresh Token_ box to automatically request a refreshed token if any request receives a 401 from your app. This will help Zapier stay connected to your users’ accounts and enable Zaps to run in the background without interrupting users as long as possible.

![Zapier Visual Builder - OAuth2 Refresh Token Reqeuest screenshot](https://cdn.zappy.app/d5bb489b705fe843cbff7ffbceaffb81.png)

For this example for GitHub, we’ll leave this section blank as reviewing the API docs, there is no mention of automated token refresh. 

### Test

![Zapier Visual Builder OAuth2 test](https://cdn.zappy.app/97c33202b241291190f5dbd24507b763.png)

Add an endpoint URL to test the user’s credentials and return a successful authentication message. Here we’ll add GitHub’s user API call `https://api.github.com/user` to the _Test_ field.

### Connection Label

![Zapier Visual Builder connection label](https://cdn.zappy.app/9f05a27e149b68cf903ca77b4fa73504.png)

![Zapier Zap Editor Connection Label](https://cdn.zappy.app/f4566d4283f9d434b58165b03ed5b1f0.png)

_Add a connection label, and users' accounts in Zapier will be personalized to easily distinguish between multiple accounts._

You can also add details to the account. Whenever a new account is authenticated with Zapier, Zapier adds a _Connection Label_ so users can identify accounts and add multiple accounts if desired. Customize this label with output fields from the API call (learn more in our [connection label docs](https://platform.zapier.com/docs/auth#how-to-add-a-connection-label-to-authenticated-accounts)).

For GitHub, add {% raw %}`{{bundle.inputData.login}}`{% endraw %} to the _Connection Label_ to include the user's GitHub username along with the app name that Zapier automatically includes.


## 5. Test The Authentication

![Zapier Visual Builder OAuth test - test setup](https://cdn.zappy.app/5240afbf8ce727b7a114d9e43e2745d7.png)

![Zapier Visual Builder OAuth test - response](https://cdn.zappy.app/17b8570bfbff9cf7a037a2865a8b9e8d.png)

_OAuth v2 sends users from Zapier to your site to authenticate_

Then test the authentication. Click _Sign in_, and authorize. If you’re already logged in, the OAuth window will briefly appear and authenticate the app. You can now use this GitHub account to test triggers and actions as you build them into your integration. 

When others use your integration, they'll see a similar login flow to connect their GitHub account to Zapier—only there, the popup window will open from the Zap Editor.
